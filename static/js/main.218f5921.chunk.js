(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){e.exports=n(44)},29:function(e,t,n){},31:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(13),o=n.n(r),s=(n(29),n(6)),u=n(7),c=n(11),l=n(8),p=n(10),h=(n(30),n(31),n(1)),f=n.n(h),d=n(2),m=n(12),v=n(23),g=n(16),k=n(9),y=n.n(k),E=n(4),S=function(e){var t=e.onPlay,n=e.onStep,a=e.onFullscreen,r=e.playing,o=e.onSeek,s=e.position,u=e.duration;return i.a.createElement("div",{className:"controls"},i.a.createElement("button",{className:"btn btn-default",onClick:function(e){n(-1),e.stopPropagation()}},i.a.createElement(E.g,null)),i.a.createElement("button",{className:y()("btn","btn-default"),onClick:function(e){console.log("play/pause: "),t(),e.stopPropagation()}},r?i.a.createElement(E.e,null):i.a.createElement(E.f,null)),i.a.createElement("button",{className:"btn btn-default",onClick:function(e){n(1),e.stopPropagation()}},i.a.createElement(E.h,null)),i.a.createElement("input",{type:"range",value:s,min:"0",max:u,step:"0.04",onInput:function(e){console.log("range value: ".concat(e.target.value));var t=parseFloat(e.target.value);o(t),e.stopPropagation()}}),i.a.createElement("button",{className:"btn btn-default glyphicon glyphicon-fullscreen",onClick:function(e){a(),e.stopPropagation()}},i.a.createElement(E.d,null)))},w=n(19),b=n.n(w),O=n(20),P=n(21);function V(e){return e.split("?")[0].endsWith(".m3u8")}function R(e){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(f.a.mark(function e(t){var n,a,i,r,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return a=e.sent,(i=new P.a).push(a),i.end(),r=i.manifest,o=r.playlists.map(function(e){return Object(O.a)({url:N(t,e.uri),bandwidth:e.attributes.BANDWIDTH},e.attributes.RESOLUTION)}),e.abrupt("return",{mainUrl:t,variants:o,selectedVariant:0});case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e,t){return 0===(n=t).indexOf("http://")||0===n.indexOf("https://")?t:e.replace(/\/[^\/]*$/,"/"+t);var n}var T=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={zoom:1,panHorizontal:0,panVertical:0},n.setVideoRef=function(e){n.videoElement=e,null!==e&&(n.props.onTimeUpdate&&n.videoElement.addEventListener("timeupdate",function(){n.props.onTimeUpdate(n.videoElement.currentTime)}),n.props.onDurationSet&&n.videoElement.addEventListener("loadedmetadata",function(){n.props.onDurationSet(n.videoElement.duration)}))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"play",value:function(){var e=Object(d.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.videoElement.play());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"pause",value:function(){this.videoElement.pause()}},{key:"quickSeek",value:function(e){this.videoElement.currentTime=e}},{key:"zoomIn",value:function(){this.zoom(1.1)}},{key:"zoomOut",value:function(){this.zoom(1/1.1)}},{key:"zoom",value:function(e){var t=(1-e)/2*document.documentElement.clientWidth+e*this.state.panHorizontal,n=(1-e)/2*document.documentElement.clientHeight+e*this.state.panVertical;this.setState({zoom:this.state.zoom*e,panHorizontal:t,panVertical:n})}},{key:"pan",value:function(e,t){this.setState({panHorizontal:this.state.panHorizontal+e,panVertical:this.state.panVertical+t})}},{key:"resetPanZoom",value:function(){var e=(document.documentElement.clientHeight-this.videoElement.offsetHeight/this.state.zoom)/2;this.setState({zoom:1,panHorizontal:0,panVertical:e})}},{key:"seek",value:function(){var e=Object(d.a)(f.a.mark(function e(t){var n=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>this.videoElement.duration)){e.next=2;break}return e.abrupt("return",Promise.reject("Invalid seek position: ".concat(t,", media duration is ").concat(this.videoElement.duration)));case 2:return e.abrupt("return",new Promise(function(e,a){n.videoElement.addEventListener("seeked",function(){e()},{once:!0}),n.videoElement.currentTime=t}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadSource",value:function(){var e=Object(d.a)(f.a.mark(function e(t){var n=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("load source: ".concat(t)),e.abrupt("return",new Promise(function(e,a){n.videoElement.addEventListener("canplay",function(){e()},{once:!0}),V(t)?n.loadHls(t):n.videoElement.src=t}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadHls",value:function(e){var t=this.state.hls;t||(t=new b.a,this.setState({hls:t})),t.loadSource(e),t.attachMedia(this.videoElement)}},{key:"currentTime",value:function(){return this.videoElement.currentTime}},{key:"render",value:function(){var e=parseInt(100*this.state.zoom)+"vw";return i.a.createElement("video",{muted:this.props.muted,ref:this.setVideoRef,tabIndex:"-1",style:{width:e,left:this.state.panHorizontal+"px",top:this.state.panVertical+"px"}})}}]),t}(a.Component),x=(n(40),n(5)),j=(n(41),n(22)),I=n.n(j);function A(e,t,n){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(f.a.mark(function e(t,n,a){var i,r,o,s,u,c,l=arguments;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=l.length>3&&void 0!==l[3]?l[3]:10485760,r=0,o=i;case 3:if(a()){e.next=19;break}return e.next=6,_(t,{start:r,end:o});case 6:if(s=e.sent,u=s.data,c=parseInt(s.contentRange.split("/")[1]),u.fileStart=r,n(u),o!==c){e.next=13;break}return e.abrupt("break",19);case 13:if(r=o,o=Math.min(c,r+i),!(u.length<i)){e.next=17;break}return e.abrupt("break",19);case 17:e.next=3;break;case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e,t){return U.apply(this,arguments)}function U(){return(U=Object(d.a)(f.a.mark(function e(t,n){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET",headers:{Range:"bytes=".concat(n.start,"-").concat(n.end)}});case 2:if((a=e.sent).ok){e.next=5;break}throw Error("Fetch failed with status: ".concat(a.status));case 5:return e.next=7,a.arrayBuffer();case 7:return e.t0=e.sent,e.t1=a.headers.get("Content-Length"),e.t2=a.headers.get("Content-Range"),e.abrupt("return",{data:e.t0,contentLength:e.t1,contentRange:e.t2});case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function F(){return(F=Object(d.a)(f.a.mark(function e(t){var n,a,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("mp4Info: ".concat(t)),n=!1,a=new I.a.MP4Box,i=new Promise(function(e,t){a.onError=function(e){n=!0,console.log(e),t(e)},a.onReady=function(t){n=!0,e(t)}}),A(t,function(e){a.appendBuffer(e)},function(){return n}).catch(function(e){console.log("error: ".concat(e)),console.trace(e)}),e.abrupt("return",i);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var D=function(e){return F.apply(this,arguments)},M=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).stopPropagation=n.stopPropagation.bind(Object(x.a)(Object(x.a)(n))),n.urlInputKeyDown=n.urlInputKeyDown.bind(Object(x.a)(Object(x.a)(n))),n.state={source:n.props.defaultSource,showUrlInput:!1},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"setInputRef",value:function(e){this.input=e}},{key:"loadHlsMetadata",value:function(){var e=Object(d.a)(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:n=e.sent,this.setState({hls:n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadMp4Metadata",value:function(e){var t=this;D(e).then(function(e){t.setState({mp4Info:e})}).catch(function(e){return console.trace(e)})}},{key:"componentDidMount",value:function(){this.changeSource(this.state.source),console.log("Source selector add event listeners"),this.input.addEventListener("keydown",this.urlInputKeyDown),this.input.addEventListener("keypress",this.stopPropagation),this.input.addEventListener("keyup",this.stopPropagation)}},{key:"componentWillUnmount",value:function(){this.input.removeEventListener("keydown",this.urlInputKeyDown),this.input.removeEventListener("keypress",this.stopPropagation),this.input.removeEventListener("keyup",this.stopPropagation)}},{key:"stopPropagation",value:function(e){e.stopPropagation()}},{key:"urlInputKeyDown",value:function(e){switch(e.stopPropagation(),e.keyCode){case 13:this.onUrlSelected(e.target.value);break;case 27:this.hideUrlInput()}}},{key:"onBlur",value:function(){console.log("onBlur"),this.setState({showUrlInput:!1})}},{key:"handleChange",value:function(e){e.target.files&&this.props.onChange(e.target.files[0])}},{key:"showUrlInput",value:function(){this.setState({showUrlInput:!0})}},{key:"hideUrlInput",value:function(){this.setState({showUrlInput:!1})}},{key:"onUrlSelected",value:function(e){console.log("url: ".concat(e)),this.hideUrlInput(),this.changeSource({type:"url",name:e,url:e})}},{key:"onFileSelected",value:function(e){if(e.target.files&&e.target.files[0]){var t=e.target.files[0];this.changeSource({type:"file",name:t.name,url:window.URL.createObjectURL(t)})}}},{key:"onVariantSelected",value:function(e){console.log("variant selected: ".concat(e.target.value));var t=e.target.value;this.setVariant(t)}},{key:"setVariant",value:function(e){this.setState({hls:Object.assign({},this.state.hls,{selectedVariant:e})});var t=this.state.hls.variants[e].url;this.props.onChange(Object.assign({},this.state.source,{url:t}))}},{key:"changeSource",value:function(e){var t=this,n=this.state.source;V(e.url)?(this.setState({source:e,mp4Info:null}),this.loadHlsMetadata(e.url).then(function(){t.setVariant(e.variant?e.variant:0),"file"===n.type&&n.url&&window.URL.revokeObjectURL(n)})):(this.setState({source:e,hls:null}),this.loadMp4Metadata(e.url),this.props.onChange(e),"file"===n.type&&n.url&&window.URL.revokeObjectURL(n))}},{key:"componentDidUpdate",value:function(e,t,n){this.state.showUrlInput&&this.input.focus()}},{key:"currentUrl",value:function(){return"url"===this.state.source.type?this.state.source.url:""}},{key:"formatMetadata",value:function(e,t,n){return"[".concat(Math.round(e/1e3),"kbit/s ").concat(t,"x").concat(n,"]")}},{key:"renderSelectedSource",value:function(){var e=this;if(this.state.showUrlInput)return null;var t=null;if(this.state.hls){var n=this.state.hls.variants.map(function(t,n){return i.a.createElement("option",{key:n,value:n},e.formatMetadata(t.bandwidth,t.width,t.height))});t=i.a.createElement("select",{value:this.state.hls.selectedVariant,onChange:function(t){return e.onVariantSelected(t)}},n)}else if(this.state.mp4Info){var a=this.state.mp4Info.videoTracks[0],r=a.bitrate,o=a.video.width,s=a.video.height;t=i.a.createElement("span",null,this.formatMetadata(r,o,s))}return i.a.createElement("div",{className:"source-metadata"},i.a.createElement("div",{className:"source-name",title:this.state.source.name},this.state.source.name),i.a.createElement("div",null,t))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"source-selector "+this.props.className},i.a.createElement("div",{className:"source-buttons"},i.a.createElement("div",{title:"open URL",className:"url-button"},i.a.createElement(E.b,{style:{cursor:"pointer"},onClick:function(){return e.showUrlInput()}})),i.a.createElement("label",{title:"open local file",className:"source-file-input",onClick:function(t){e.hideUrlInput(),t.stopPropagation()}},i.a.createElement(E.a,null),i.a.createElement("input",{type:"file",onChange:function(t){return e.onFileSelected(t)}}))),i.a.createElement("input",{className:y()("url-input",{hidden:!this.state.showUrlInput}),type:"text",ref:function(t){return e.setInputRef(t)},onBlur:function(){return e.onBlur()},defaultValue:this.currentUrl()}),this.renderSelectedSource())}}]),t}(a.Component),H=(n(42),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).mouseMove=n.mouseMove.bind(Object(x.a)(Object(x.a)(n))),n.mouseDown=n.mouseDown.bind(Object(x.a)(Object(x.a)(n))),n.mouseUp=n.mouseUp.bind(Object(x.a)(Object(x.a)(n))),console.log("Split view constructor"),n.state={splitPercent:0,dragStart:null,dragging:!1},n.setSplitViewContainerRef=function(e){n.splitViewContainer=e},n.setSplitViewClipperRef=function(e){n.splitViewClipper=e},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.splitViewContainer.addEventListener("mousemove",this.mouseMove,{passive:!0}),this.splitViewContainer.addEventListener("mousedown",this.mouseDown),document.addEventListener("mouseup",this.mouseUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.mouseUp),this.splitViewContainer.removeEventListener("mousedown",this.mouseDown),this.splitViewContainer.removeEventListener("mousemove",this.mouseMove,{passive:!0})}},{key:"mouseUp",value:function(e){this.state.dragging&&(this.ignoreNextClick=!0),this.setState({dragStart:null,dragging:!1})}},{key:"onClick",value:function(e){this.ignoreNextClick?this.ignoreNextClick=!1:this.props.onClick(e)}},{key:"mouseDown",value:function(e){this.setState({dragStart:{x:e.clientX,y:e.clientY}})}},{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"componentDidUpdate",value:function(e,t){this.props.tracking&&!e.tracking&&this.setSplitPosition(this.state.splitPercent)}},{key:"mouseMove",value:function(e){this.state.dragStart?(this.setState({dragging:!0}),this.props.onDrag(e.movementX,e.movementY)):this.trackLocation(e)}},{key:"trackLocation",value:function(e){if(this.splitViewContainer){var t=this.splitViewContainer.getBoundingClientRect(),n=(e.pageX-t.left)/this.splitViewContainer.offsetWidth*100;n<=100&&(this.setState({splitPercent:n}),this.props.tracking&&this.setSplitPosition(n))}}},{key:"setSplitPosition",value:function(e){this.splitViewClipper.style.width=e+"%"}},{key:"focus",value:function(){this.splitViewContainer.focus()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:y()("split-view-container",{dragging:this.state.dragging}),ref:function(t){return e.setSplitViewContainerRef(t)},tabIndex:"-1",onClick:function(t){return e.onClick(t)}},i.a.createElement("div",{className:"split-view-clipper",ref:function(t){return e.setSplitViewClipperRef(t)}},this.props.leftSideContent),this.props.children)}}]),t}(a.Component));function z(e){return e<10?"0"+e:""+e}var W=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%60),i=Math.floor((e-Math.floor(e))/.04);return z(t)+":"+z(n)+":"+z(a)+"."+z(i)},Z=function(e){var t=e.position;return i.a.createElement("div",{className:"time-display"},W(t))};var B=function(e){var t=e.offset;return 0===t?null:i.a.createElement("div",{className:"offset-indicator"},"offset: ",function(e){return e>0?"+":""}(t),.04*t)},K=(n(43),function(e,t,n){return{name:e,keys:t,description:n}}),G={PLAY:K("PLAY","l","Play video"),PAUSE:K("PAUSE","k","Pause video"),PLAY_PAUSE:K("PLAY_PAUSE","space","Play/Pause video"),STEP_FORWARD_FRAME:K("STEP_FORWARD_FRAME",".","Step forward 1 frame"),STEP_BACKWARD_FRAME:K("STEP_BACKWARD_FRAME",",","Step backward 1 frame"),STEP_FORWARD:K("STEP_FORWARD",["/","-"],"Step forward 1 second"),STEP_BACKWARD:K("STEP_BACKWARD","m","Step backward 1 second"),FULLSCREEN:K("FULLSCREEN","f","Toggle full screen"),TOGGLE_TRACKING:K("TOGGLE_TRACKING","t","Toggle split position follows mouse"),LEFT_ONLY:K("LEFT_ONLY","]","View only left video"),RIGHT_ONLY:K("RIGHT_ONLY","[","View only right video"),TIMESHIFT_DECREASE:K("OFFSET_DECREASE","<","Decrease timeshift between videos"),TIMESHIFT_INCREASE:K("OFFSET_INCREASE",">","Increase timeshift between videos"),ZOOM_IN:K("ZOOM_IN","u","Zoom in"),ZOOM_OUT:K("ZOOM_OUT","i","Zoom out"),PAN_UP:K("PAN_UP","up","Pan up"),PAN_DOWN:K("PAN_DOWN","down","Pan down"),PAN_RIGHT:K("PAN_RIGHT","right","Pan right"),PAN_LEFT:K("PAN_LEFT","left","Pan left"),REST_PAN_ZOOM:K("RESET_PAN_ZOOM","0","Reset pan and zoom to default")},Y=Object.keys(G).reduce(function(e,t){return Object.assign(e,Object(m.a)({},G[t].name,G[t].keys))},{});console.log("KEY_MAP: ".concat(JSON.stringify(Y)));var q=function(e){var t=e.visible,n=e.onClick;return i.a.createElement("div",{className:y()("help",{hidden:!t})},i.a.createElement("div",{className:"help-header"},i.a.createElement("h3",null,"Vivict - Vivict Video Comparison Tool"),i.a.createElement("div",{className:"close-button",onClick:function(){return n()}},i.a.createElement(E.i,null))),i.a.createElement("div",null,i.a.createElement("h4",null,"Keybindings:"),X()))},J=function(e){var t=e.onClick,n=e.className;return i.a.createElement("div",{className:"help-button "+n,onClick:function(e){return t(e)}},i.a.createElement(E.c,null))},X=function(){return Object.keys(G).map(function(e){var t=G[e];return i.a.createElement("div",{key:"keybinding-"+t.name},i.a.createElement("bold",null,JSON.stringify(t.keys)),"  "+t.description)})};var $=new URLSearchParams(window.location.search),Q=$.get("leftVideoUrl")||"https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8",ee=$.get("rightVideoUrl")||Q,te=$.get("leftVideoVariant")||0,ne=$.get("rightVideoVariant")||1,ae=Number($.get("position"))||0,ie={type:"url",name:Q,url:Q,variant:te,position:ae},re={type:"url",name:ee,url:ee,variant:ne,position:ae},oe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).shortCutHandlers=[[G.STEP_FORWARD,function(){return n.step(25)}],[G.STEP_FORWARD_FRAME,function(){return n.step(1)}],[G.STEP_BACKWARD_FRAME,function(){return n.step(-1)}],[G.STEP_BACKWARD,function(){return n.step(-25)}],[G.PLAY_PAUSE,function(){return n.playPause()}],[G.FULLSCREEN,function(){return n.fullscreen()}],[G.TOGGLE_TRACKING,function(){return n.toggleTracking()}],[G.LEFT_ONLY,function(){return n.splitView.setSplitPosition(100)}],[G.RIGHT_ONLY,function(){return n.splitView.setSplitPosition(0)}],[G.TIMESHIFT_INCREASE,function(){return n.changeOffset(1)}],[G.TIMESHIFT_DECREASE,function(){return n.changeOffset(-1)}],[G.ZOOM_IN,function(){return n.zoomIn()}],[G.ZOOM_OUT,function(){return n.zoomOut()}],[G.PAN_UP,function(){return n.pan(0,10)}],[G.PAN_DOWN,function(){return n.pan(0,-10)}],[G.PAN_RIGHT,function(){return n.pan(-10,0)}],[G.PAN_LEFT,function(){return n.pan(10,0)}],[G.REST_PAN_ZOOM,function(){return n.resetPanZoom()}],[G.PLAY,function(){return n.playForward()}],[G.PAUSE,function(){return n.pause()}]].reduce(function(e,t){var n=Object(v.a)(t,2),a=n[0],i=n[1];return Object.assign(e,Object(m.a)({},a.name,i))},{}),n.setVideoViewerRef=function(e){n.videoViewer=e},n.setRightVideoRef=function(e){console.log("setRightVideoRef",e),n.rightVideo=e},n.setLeftVideoRef=function(e){n.leftVideo=e},n.setSplitViewRef=function(e){n.splitView=e},n.state={playing:!1,duration:0,position:0,leftSource:{name:"NONE",url:null},rightSource:{name:"NONE",url:null},tracking:!0,rightVideoOffset:0,showHelp:!0,playReverse:!1,userDefinedPanZoom:!1},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"setPosition",value:function(e){this.setState({position:e})}},{key:"setPlaying",value:function(e){this.setState({playing:e})}},{key:"setLeftSource",value:function(e){this.setState({leftSource:e})}},{key:"setRightSource",value:function(e){this.setState({rightSource:e})}},{key:"toggleTracking",value:function(){this.setState({tracking:!this.state.tracking})}},{key:"changeOffset",value:function(e){var t=this;this.setState({rightVideoOffset:this.state.rightVideoOffset+e}),this.state.playing?this.pause().then(function(){return t.play()}):this.seek(this.leftVideo.currentTime())}},{key:"playPause",value:function(){this.state.playing?this.pause():this.play()}},{key:"step",value:function(){var e=Object(d.a)(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.rightVideo.currentTime()+.04*t,this.rightVideo.quickSeek(n),this.leftVideo.quickSeek(n);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fullscreen",value:function(){var e;document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():(e=this.videoViewer).requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"onTimeUpdate",value:function(e){this.setPosition(e)}},{key:"onDurationSet",value:function(e){this.setState({duration:e})}},{key:"syncPlayers",value:function(){this.leftVideo.seek(this.rightVideo.currentTime()),this.setPosition(this.leftVideo.currentTime())}},{key:"playForward",value:function(){var e=Object(d.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.playing){e.next=3;break}return e.next=3,this.pause();case 3:return this.leftVideo.playbackRate=1,this.rightVideo.playbackRate=1,e.abrupt("return",this.play());case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"play",value:function(){var e=Object(d.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.playing){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return e.next=4,Promise.all([this.rightVideo.play(),this.leftVideo.play()]);case 4:this.setPlaying(!0);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"pause",value:function(){var e=Object(d.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.playing){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return this.rightVideo.pause(),this.leftVideo.pause(),this.setPlaying(!1),e.abrupt("return",this.seek(this.leftVideo.currentTime()));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"seek",value:function(){var e=Object(d.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({position:t}),e.abrupt("return",Promise.all([this.leftVideo.seek(t),this.rightVideo.seek(t+.04*this.state.rightVideoOffset)]));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onLeftSourceChange",value:function(){var e=Object(d.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.changeSource(this.leftVideo,t);case 2:this.setLeftSource(t),this.splitView.focus();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onRightSourceChange",value:function(){var e=Object(d.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.changeSource(this.rightVideo,t);case 2:this.setRightSource(t),this.splitView.focus();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"changeSource",value:function(){var e=Object(d.a)(f.a.mark(function e(t,n){var a,i,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.playing,i=this.state.playReverse,e.next=4,this.pause();case 4:return r=t.currentTime(),console.log("".concat(JSON.stringify(t.props)," time: ").concat(r)),e.next=8,t.loadSource(n.url);case 8:return e.next=10,this.seek(r);case 10:if(!a){e.next=13;break}return e.next=13,this.play();case 13:if(!i){e.next=16;break}return e.next=16,this.playReverse();case 16:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"zoomIn",value:function(){this.leftVideo.zoomIn(),this.rightVideo.zoomIn(),this.setState({userDefinedPanZoom:!0})}},{key:"zoomOut",value:function(){this.leftVideo.zoomOut(),this.rightVideo.zoomOut(),this.setState({userDefinedPanZoom:!0})}},{key:"resetPanZoom",value:function(){this.leftVideo.resetPanZoom(),this.rightVideo.resetPanZoom(),this.setState({userDefinedPanZoom:!1})}},{key:"pan",value:function(e,t){this.leftVideo.pan(e,t),this.rightVideo.pan(e,t),this.setState({userDefinedPanZoom:!0})}},{key:"toggleShowHelp",value:function(){this.setState({showHelp:!this.state.showHelp})}},{key:"onFullScreenChange",value:function(){this.state.userDefinedPanZoom||this.resetPanZoom()}},{key:"componentDidMount",value:function(){var e=this;this.splitView.focus(),this.seek(ae).catch(function(e){return console.trace(e)}),this.videoViewer.addEventListener("fullscreenchange",function(){return e.onFullScreenChange()})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"video-viewer",tabIndex:"0",ref:this.setVideoViewerRef},i.a.createElement(Z,{position:this.state.position}),i.a.createElement(g.HotKeys,{className:"hotkeys-div",keyMap:Y,handlers:this.shortCutHandlers},i.a.createElement(H,{tracking:this.state.tracking,onDrag:function(t,n){return e.pan(t,n)},onClick:function(){return e.playPause()},ref:this.setSplitViewRef,leftSideContent:i.a.createElement(T,{muted:!0,ref:this.setLeftVideoRef})},i.a.createElement(T,{ref:this.setRightVideoRef,onTimeUpdate:function(t){return e.onTimeUpdate(t)},onDurationSet:function(t){return e.onDurationSet(t)}}),i.a.createElement("div",{className:y()("big-play-button",{hidden:this.state.playing}),onClick:function(){return e.play()}},i.a.createElement(E.f,{size:"32px"}))),i.a.createElement(S,{playing:this.state.playing,onPlay:function(){return e.playPause()},onStep:function(t){return e.step(t)},onFullscreen:function(){return e.fullscreen()},duration:this.state.duration,onSeek:function(t){return e.seek(t)},position:this.state.position}),i.a.createElement(M,{className:"left-source-selector",defaultSource:ie,onChange:function(t){return e.onLeftSourceChange(t)}}),i.a.createElement(M,{className:"right-source-selector",defaultSource:re,onChange:function(t){return e.onRightSourceChange(t)}}),i.a.createElement(B,{offset:this.state.rightVideoOffset}),i.a.createElement(q,{visible:this.state.showHelp,onClick:function(){return e.toggleShowHelp()}}),i.a.createElement(J,{onClick:function(){return e.toggleShowHelp()}})))}}]),t}(a.Component),se=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(oe,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.218f5921.chunk.js.map